"use strict";(self.webpackChunkkamui_customizer=self.webpackChunkkamui_customizer||[]).push([[652],{652:(ze,z,g)=>{g.r(z),g.d(z,{KamuiModule:()=>Se});var m=g(808),B=g(937),M=g(646),b=(()=>{return(o=b||(b={})).Female1="b_female1",o.Female2="b_female2",o.Male1="b_male1",o.Male2="b_male2",b;var o})(),c=(()=>{return(o=c||(c={})).HairClip="o_hairclip",o.Hair="o_hair",o.Sweat="o_sweat",o.Blush="o_blush",o.Features="o_features",o.Expressions="o_expressions",o.Body="o_body",c;var o})(),C=(()=>{return(o=C||(C={})).Normal="e_normal",o.Smile="e_smile",o.Pained="e_pained",o.Angry="e_angry",o.Indignant="e_indignant",C;var o})();const h={[c.Body]:{title:"Face",count:7,path:"body"},[c.Hair]:{title:"Hair",count:12,path:"hair",colorSettings:{options:["#F1EFE6","#C35654","#D1876A","#E9D7C1","#A6D1A2","#7AB6C0","#90A6CF","#C9A0D1","#F9D7DB","#C1A798","#9FA0A1","#9B3F42","#996049","#CABFA2","#698059","#377781","#4A5877","#81608A","#EAAFB2","#817062","#5A5850","#E75860","#F1976E","#E9D699","#89CE84","#7FE0DB","#4881B3","#AB7ED3","#F28FA9","#69473D"]}},[c.HairClip]:{title:"Hair Clip",count:5,path:"hairclip",canBeBlank:!0},[c.Features]:{title:"Facial Features",count:12,path:"features",canBeBlank:!0},[c.Expressions]:{title:"Expressions",path:"body",childOptions:{[C.Normal]:{title:"Default",path:"normal"},[C.Smile]:{title:"Smile",path:"smile"},[C.Pained]:{title:"Pained",path:"pained"},[C.Angry]:{title:"Angry",path:"angry"},[C.Indignant]:{title:"Indignant",path:"indignant"}},dependsOn:c.Body},[c.Sweat]:{title:"Sweat",path:"sweat",toggleable:!0},[c.Blush]:{title:"Blush",path:"blush",toggleable:!0}},O="CORN",P=[c.Body,c.Hair,c.HairClip,c.Features,c.Expressions,c.Blush,c.Sweat],L=[c.HairClip,c.Hair,c.Features,c.Sweat,c.Blush,c.Expressions,c.Body],A={[b.Female1]:{title:"Female 1",path:"female1",offset:{x:0,y:0},options:{[c.Body]:Object.assign(Object.assign({},h[c.Body]),{offset:{x:0,y:0}}),[c.Hair]:Object.assign(Object.assign({},h[c.Hair]),{offset:{x:0,y:0}}),[c.HairClip]:Object.assign(Object.assign({},h[c.HairClip]),{offset:{x:128,y:27}}),[c.Features]:Object.assign(Object.assign({},h[c.Features]),{offset:{x:0,y:0}}),[c.Expressions]:Object.assign(Object.assign({},h[c.Expressions]),{offset:{x:0,y:0}}),[c.Sweat]:Object.assign(Object.assign({},h[c.Sweat]),{offset:{x:130,y:85}}),[c.Blush]:Object.assign(Object.assign({},h[c.Blush]),{offset:{x:96,y:64}})}},[b.Female2]:{title:"Female 2",path:"female2",offset:{x:0,y:0},options:{[c.Body]:Object.assign(Object.assign({},h[c.Body]),{offset:{x:0,y:0}}),[c.Hair]:Object.assign(Object.assign({},h[c.Hair]),{offset:{x:0,y:0}}),[c.HairClip]:Object.assign(Object.assign({},h[c.HairClip]),{offset:{x:128,y:27}}),[c.Features]:Object.assign(Object.assign({},h[c.Features]),{offset:{x:0,y:0}}),[c.Expressions]:Object.assign(Object.assign({},h[c.Expressions]),{offset:{x:0,y:0}}),[c.Sweat]:Object.assign(Object.assign({},h[c.Sweat]),{offset:{x:131,y:101}}),[c.Blush]:Object.assign(Object.assign({},h[c.Blush]),{offset:{x:96,y:75}})}},[b.Male1]:{title:"Male 1",path:"male1",offset:{x:0,y:0},options:{[c.Body]:Object.assign(Object.assign({},h[c.Body]),{offset:{x:0,y:0}}),[c.Hair]:Object.assign(Object.assign({},h[c.Hair]),{offset:{x:0,y:0}}),[c.Features]:Object.assign(Object.assign({},h[c.Features]),{offset:{x:0,y:0}}),[c.Expressions]:Object.assign(Object.assign({},h[c.Expressions]),{offset:{x:0,y:0}}),[c.Sweat]:Object.assign(Object.assign({},h[c.Sweat]),{offset:{x:133,y:79}}),[c.Blush]:Object.assign(Object.assign({},h[c.Blush]),{offset:{x:90,y:45}})}},[b.Male2]:{title:"Male2",path:"male2",offset:{x:0,y:0},options:{[c.Body]:Object.assign(Object.assign({},h[c.Body]),{offset:{x:0,y:0}}),[c.Hair]:Object.assign(Object.assign({},h[c.Hair]),{offset:{x:0,y:0}}),[c.Features]:Object.assign(Object.assign({},h[c.Features]),{offset:{x:0,y:0}}),[c.Expressions]:Object.assign(Object.assign({},h[c.Expressions]),{offset:{x:0,y:0}}),[c.Sweat]:Object.assign(Object.assign({},h[c.Sweat]),{offset:{x:134,y:70}}),[c.Blush]:Object.assign(Object.assign({},h[c.Blush]),{offset:{x:87,y:42}})}}};var t=g(893),T=g(4),Z=g(135);let H=(()=>{class o{constructor(){}getConfig(e){const n=this.generateImagePathConfig(e);return this.loadImagesFromLocal(n).pipe((0,T.U)(s=>{const r=s.loaded/s.count,a=s.images;if(a){const l=this.generateConfig(e.bodyOptions,{baseKey:e.rootKey,assets:a,menuOrder:e.menuOrder});return{complete:r,data:{dimensions:e.dimensions,options:l,menuOrder:e.menuOrder,layerOrder:e.layerOrder}}}return{complete:r,data:null}}))}loadImagesFromLocal(e){const n=[],s={},r=(d,u,p)=>{var f;const y=u?`${u} ${p.name}`:p.name,_=[d,p.path].join("/");if(null===(f=p.subCategories)||void 0===f?void 0:f.length)for(const x of p.subCategories)r(_,y,x);else n.push({key:y,path:_})};r("",null,e);const a=new Z.X({count:n.length,loaded:0,images:null});let l=0;return n.forEach(d=>{const u=new Image;u.addEventListener("load",()=>{s[d.key]=u,l++,l===n.length?(a.next({count:n.length,loaded:l,images:s}),a.complete()):a.next({count:n.length,loaded:l,images:null})}),u.src=d.path}),a.asObservable()}generateImagePathConfig(e){const{rootKey:n,rootPath:s,imageType:r,bodyOptions:a}=e;return{name:n,path:s,subCategories:Object.keys(a).map(d=>{const u=a[d],p=[],f=u.options;for(const _ of Object.keys(u.options)){const x=f[_];this.doOnOptionType(x,()=>{p.push({name:_,path:`${x.path}.${r}`})},S=>{const I=this.getGeneralPaths(S,r);p.push({name:_,path:x.path,subCategories:I})},S=>{const Ie=this.getDependentPaths(f[S].count,x.childOptions,r);p.push({name:_,path:x.path,subCategories:Ie})})}return{name:d,path:u.path,subCategories:p}})}}getGeneralPaths(e,n){const s=[];for(let r=1;r<=e;r++)s.push({name:`${r}`,path:`${r}.${n}`});return s}getDependentPaths(e,n,s){const r=[];for(let a=1;a<=e;a++)Object.keys(n).forEach(l=>{r.push({name:`${a}_${l}`,path:`${a}_${n[l].path}.${s}`})});return r}generateConfig(e,n){return Object.keys(e).map(s=>({bodyType:s,title:e[s].title,config:this.generateConfigForBodyType(s,e[s],n)}))}generateConfigForBodyType(e,n,s){return s.menuOrder.map(r=>{const a=n.options,l=a[r];return this.doOnOptionType(l,()=>this.getToggleOptionConfig(e,r,l,s),d=>this.getStandardOptionConfig(e,r,l,s),d=>this.getDependentOptionConfig(e,r,l,d,a[d].count,s),()=>this.getNullOptionConfig(r))})}getToggleOptionConfig(e,n,s,r){const a=`${r.baseKey} ${e} ${n}`;return Object.assign(Object.assign({},this.getConfigWithTitle(n,s)),{canBeBlank:!0,assets:r.assets[a]})}getStandardOptionConfig(e,n,s,r){const a=this.getConfigWithTitle(n,s),l=`${r.baseKey} ${e} ${a.name}`;return Object.assign(Object.assign({},a),{assets:this.getAssetsForType(l,s.count,r.assets)})}getNullOptionConfig(e){return Object.assign(Object.assign({},this.getConfigWithTitle(e)),{assets:null})}getDependentOptionConfig(e,n,s,r,a,l){const d=this.getConfigWithTitle(n,s),u=`${l.baseKey} ${e} ${d.name}`,p=Object.keys(s.childOptions);return Object.assign(Object.assign({},d),{assets:this.getAssetsForType(u,a,l.assets,p),dependsOn:r})}getAssetsForType(e,n,s,r){if(!n)return null;const a=[];for(let l=1;l<=n;l++)if(null==r?void 0:r.length){const d=r.map(u=>s[`${e} ${l}_${u}`]);a.push(d)}else a.push(s[`${e} ${l}`]);return a}getConfigWithTitle(e,n){if(!n)return{name:e,title:"--",offset:null,canBeBlank:!0,assets:null};const s={name:e,title:n.title,offset:n.offset,canBeBlank:n.canBeBlank||!1,colorSettings:n.colorSettings,assets:null};return n.childOptions?Object.assign(Object.assign({},s),{optionLabels:Object.values(n.childOptions).map(r=>r.title)}):Object.assign({},s)}doOnOptionType(e,n,s,r,a){return(null==e?void 0:e.toggleable)?n():(null==e?void 0:e.count)?s(e.count):(null==e?void 0:e.dependsOn)?r(e.dependsOn):a?a():void 0}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),D=(()=>{class o{constructor(){this.configStore={}}getConfig(e){return this.configStore[e]}setConfig(e,n){this.configStore[e]=n}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),$=(()=>{class o{constructor(e){this._baseHref=e}getBasePath(e){return[".",this._baseHref.split("/").join(""),e].filter(n=>n.length).join("/")}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(m.mr))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),V=(()=>{class o{constructor(e,n,s){this.loader=e,this.store=n,this.baseHref=s,this.cornPath=this.baseHref.getBasePath("assets/corn"),this.ext="png",this.cornConfig={rootKey:O,rootPath:this.cornPath,imageType:this.ext,menuOrder:P,layerOrder:L,dimensions:{x:255,y:255},bodyOptions:A}}getCorrinConfig(){const e=this.store.getConfig(O);return e?(0,M.of)(e):this.loader.getConfig(this.cornConfig)}cacheCorn(e){this.store.setConfig(O,e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(H),t.LFG(D),t.LFG($))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function w(o,i){return o+Math.floor((i-o+1)*Math.random())}const J=["*"];let F=(()=>{class o{constructor(){this.baseClass=!0,this.disabled=!1,this.enableMenu=!1,this.valueChange=new t.vpe}ngOnInit(){}next(){let e=this.value+1;e>this.max&&(e=this.min),this.valueChange.emit(e)}previous(){let e=this.value-1;e<this.min&&(e=this.max),this.valueChange.emit(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["fec-options-select"]],hostVars:4,hostBindings:function(e,n){2&e&&t.ekj("fec-options-select",n.baseClass)("fec-options-select--disabled",n.disabled)},inputs:{disabled:"disabled",value:"value",min:"min",max:"max",enableMenu:"enableMenu"},outputs:{valueChange:"valueChange"},ngContentSelectors:J,decls:4,vars:2,consts:[["aria-label","previous option",1,"fec-options-select__button","fec-options-select__previous",3,"disabled","click"],[1,"fec-options-select__title"],["aria-label","next option",1,"fec-options-select__button","fec-options-select__next",3,"disabled","click"]],template:function(e,n){1&e&&(t.F$t(),t.TgZ(0,"button",0),t.NdJ("click",function(){return n.previous()}),t.qZA(),t.TgZ(1,"div",1),t.Hsn(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.next()}),t.qZA()),2&e&&(t.Q6J("disabled",n.disabled),t.xp6(3),t.Q6J("disabled",n.disabled))},styles:['.fec-options-select[_nghost-%COMP%]{display:flex;width:100%}.fec-options-select__title[_ngcontent-%COMP%], .fec-options-select__action[_ngcontent-%COMP%]{flex:1;text-align:center;position:relative}.fec-options-select__previous[_ngcontent-%COMP%]:before{display:block;content:"";width:0;height:0;border-top:5px solid transparent;border-bottom:5px solid transparent;border-right:7px solid #111}.fec-options-select__next[_ngcontent-%COMP%]:before{display:block;content:"";width:0;height:0;border-top:5px solid transparent;border-bottom:5px solid transparent;border-left:7px solid #111}']}),o})(),R=(()=>{class o{constructor(){this.canvas1=document.createElement("canvas"),this.canvas2=document.createElement("canvas"),this.ctx1=this.canvas1.getContext("2d"),this.ctx2=this.canvas2.getContext("2d"),this.width=0,this.height=0}color(e,n,s){const{x:r,y:a}=s.dimensions;this.setSize(r,a);const l=this.ctx1,d=this.ctx2;return d.clearRect(0,0,r,a),l.drawImage(e,0,0),d.globalCompositeOperation="source-over",d.drawImage(e,0,0),l.globalCompositeOperation="source-over",l.drawImage(e,0,0),this.overlayFilter(d,n),l.drawImage(this.canvas2,0,0),l.globalCompositeOperation="source-over",d.globalCompositeOperation="source-over",d.clearRect(0,0,255,255),this.canvas1}overlayFilter(e,n){const s=this.hexToRGBA(n),r=(u,p)=>{const f=u/255,y=p/255;return Math.round(255*(f<.5?2*f*y:1-2*(1-f)*(1-y)))},a=e.getImageData(0,0,256,256),l=u=>{!(null==a?void 0:a.data)||(a.data[u]=r(a.data[u],s.r),a.data[u+1]=r(a.data[u+1],s.g),a.data[u+2]=r(a.data[u+2],s.b))},d=u=>0!=a.data[u+3];for(let u=0;u<a.data.length;u+=4)d(u)&&l(u);e.putImageData(a,0,0)}setSize(e,n){this.canvas1.width=e,this.canvas1.height=n,this.canvas2.width=e,this.canvas2.height=n,this.width=e,this.height=n}hexToRGBA(e,n=1){const s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return s?{r:parseInt(s[1],16),g:parseInt(s[2],16),b:parseInt(s[3],16),a:n}:null}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Q=function(o){return{"color-options-palette__item--selected":o}},N=function(o){return{"background-color":o}};function K(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",3),t.NdJ("click",function(){const r=t.CHM(e).index,a=t.oxw();return a.indexSelected.emit(r),a.showPalette=!1}),t.qZA()}if(2&o){const e=i.$implicit,n=i.index,s=t.oxw();t.Q6J("ngClass",t.VKq(2,Q,n===s.index))("ngStyle",t.VKq(4,N,e))}}const Y=function(o){return{"color-options-palette__options--show":o}};let q=(()=>{class o{constructor(e){this.element=e,this.baseClass=!0,this.disabled=!1,this.indexSelected=new t.vpe,this.showPalette=!1}onClickOutside(e){this.element.nativeElement.contains(e.target)||(this.showPalette=!1)}onEscape(e){this.showPalette=!1}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq))},o.\u0275cmp=t.Xpm({type:o,selectors:[["fec-color-options-palette"]],hostVars:4,hostBindings:function(e,n){1&e&&t.NdJ("mousedown",function(r){return n.onClickOutside(r)},!1,t.evT)("keydown.escape",function(r){return n.onEscape(r)}),2&e&&t.ekj("color-options-palette",n.baseClass)("color-options-palette--disabled",n.disabled)},inputs:{disabled:"disabled",colors:"colors",index:"index",title:"title"},outputs:{indexSelected:"indexSelected"},decls:4,vars:6,consts:[[1,"color-options-palette__select",3,"disabled","click"],[1,"color-options-palette__options",3,"ngClass"],["class","color-options-palette__item",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"color-options-palette__item",3,"ngClass","ngStyle","click"]],template:function(e,n){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return n.showPalette=!n.showPalette}),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,K,1,6,"button",2),t.qZA()),2&e&&(t.Q6J("disabled",n.disabled),t.xp6(1),t.hij(" ",n.title,"\n"),t.xp6(1),t.Q6J("ngClass",t.VKq(4,Y,n.showPalette)),t.xp6(1),t.Q6J("ngForOf",n.colors))},directives:[m.mk,m.sg,m.PC],styles:[".color-options-palette[_nghost-%COMP%]{width:100%;position:relative}.color-options-palette__select[_ngcontent-%COMP%]{width:100%;height:100%}.color-options-palette__options[_ngcontent-%COMP%]{position:absolute;box-sizing:border-box;width:100%;z-index:2;top:100%;left:50%;transform:translate(-50%);margin-top:2px;padding:6px;background-color:#fff;box-shadow:1px 1px 1px #0000004d;display:none;grid-template-columns:repeat(8,1fr);grid-gap:3px}.color-options-palette__options--show[_ngcontent-%COMP%]{display:grid}.color-options-palette__item[_ngcontent-%COMP%]{aspect-ratio:1/1;border:0;border-radius:1px;box-shadow:0 1px 2px #00000080;border:1px solid rgba(0,0,0,0);box-sizing:border-box;cursor:pointer}.color-options-palette__item--selected[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.5);box-shadow:0 1px 2px #000000b3}"]}),o})();function U(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"fec-options-select",1),t.NdJ("valueChange",function(s){return t.CHM(e),t.oxw().onColorListSelect(s)}),t.TgZ(2,"fec-color-options-palette",2),t.NdJ("indexSelected",function(s){return t.CHM(e),t.oxw().onColorListSelect(s)}),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("value",e.value||0)("min",e.colorListOptions.min)("max",e.colorListOptions.max),t.xp6(1),t.Q6J("colors",e.colorListOptions.colors)("title",e.title)("index",e.value||0)}}let W=(()=>{class o{constructor(e){this.colorService=e,this.result=new t.vpe,this.colorOptions=new t.vpe,this.randFunction=new t.vpe,this.colorListOptions=null,this.title="color"}set colorSettings(e){!e||e.options&&(this.colorListOptions={colors:e.options,min:0,max:e.options.length-1})}ngOnChanges(e){!this.renderItem||!this.canvasSize||this.setData()}setData(){if(this.colorListOptions){const e=this.value||0;this.renderColorFromList(e),this.title=`${this.baseTitle} Color: ${e+1}`;const n=this.createRandFunctionForList();this.randFunction.emit(n)}}renderColor(e){const n=this.colorService.color(this.renderItem,e,{dimensions:this.canvasSize});this.result.emit(n)}renderColorFromList(e){this.renderColor(this.colorListOptions.colors[e])}onColorListSelect(e){this.value=e,this.colorOptions.emit(e)}createRandFunctionForList(){const e=this.colorListOptions.min,n=this.colorListOptions.max;return()=>w(e,n)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(R))},o.\u0275cmp=t.Xpm({type:o,selectors:[["fec-color-select"]],inputs:{colorSettings:"colorSettings",renderItem:"renderItem",canvasSize:"canvasSize",value:"value",baseTitle:"baseTitle"},outputs:{result:"result",colorOptions:"colorOptions",randFunction:"randFunction"},features:[t.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[3,"value","min","max","valueChange"],[3,"colors","title","index","indexSelected"]],template:function(e,n){1&e&&t.YNc(0,U,3,6,"ng-container",0),2&e&&t.Q6J("ngIf",n.colorListOptions)},directives:[m.O5,F,q],styles:[""]}),o})();function G(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"fec-color-select",2),t.NdJ("result",function(s){return t.CHM(e),t.oxw().onColorChange(s)})("colorOptions",function(s){return t.CHM(e),t.oxw().colorChange.emit(s)})("randFunction",function(s){return t.CHM(e),t.oxw().colorRandFunction.emit(s)}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("colorSettings",e.data.colorSettings)("baseTitle",e.data.title)("value",e.colorValue)("renderItem",e.currentRenderItem)("canvasSize",e.layerSize)}}let X=(()=>{class o{constructor(){this.baseClass=!0,this.layer=new t.vpe,this.indexChange=new t.vpe,this.colorChange=new t.vpe,this.randFunction=new t.vpe,this.colorRandFunction=new t.vpe,this.title="",this.min=0,this.max=0,this.width=0,this.height=0,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.blankIndex=-1}set layerSize(e){const{x:n,y:s}=e;this.width=n,this.height=s,this.canvas.height=e.y,this.canvas.width=e.x,this.ctx.clearRect(0,0,n,s),this._layerSize=e}get layerSize(){return this._layerSize}ngOnChanges(e){var n,s;!this.data||(this.setRender(),(null===(n=e.data)||void 0===n?void 0:n.currentValue)&&this.setMinMax(),this.title=this.getTitle(),(null===(s=this.data)||void 0===s?void 0:s.colorSettings)||this.renderBasicLayer())}getTitle(){var e;if(!(null===(e=this.currentRenderList)||void 0===e?void 0:e.length))return this.data.assets?`${this.data.title}: ${this.index===this.blankIndex?"Off":"On"}`:this.data.title;let n;return n=this.data.canBeBlank&&-1===this.index?"None":this.data.optionLabels?this.data.optionLabels[this.index]:this.index+1,`${this.data.title}: ${n}`}renderBasicLayer(){this.draw(this.currentRenderItem),this.layer.emit(this.canvas)}draw(e){if(this.ctx.clearRect(0,0,this.width,this.height),e){const{x:n,y:s}=this.data.offset;this.ctx.drawImage(e,n,s)}}onColorChange(e){this.draw(e),this.layer.emit(this.canvas)}setIndex(e){this.index=e,this.indexChange.emit(e)}setRender(){this.data.dependsOn&&null!=this.dependsOnIndex?(this.currentRenderList=this.data.assets[this.dependsOnIndex],this.currentRenderItem=this.currentRenderList[this.index]):Array.isArray(this.data.assets)?(this.currentRenderList=this.data.assets,this.currentRenderItem=this.currentRenderList[this.index]):this.data.assets instanceof HTMLImageElement&&(this.currentRenderItem=this.index===this.blankIndex?null:this.data.assets)}setMinMax(){var e;this.min=this.data.canBeBlank?this.blankIndex:0,this.max=(null===(e=this.currentRenderList)||void 0===e?void 0:e.length)-1||0;const n=this.createRandFunction(this.min,this.max);this.randFunction.emit(n)}createRandFunction(e,n){return()=>w(e,n)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["fec-layer-renderer"]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("fec-layer-renderer",n.baseClass)},inputs:{data:"data",index:"index",colorValue:"colorValue",dependsOnIndex:"dependsOnIndex",layerSize:"layerSize"},outputs:{layer:"layer",indexChange:"indexChange",colorChange:"colorChange",randFunction:"randFunction",colorRandFunction:"colorRandFunction"},features:[t.TTD],decls:3,vars:6,consts:[[3,"disabled","value","min","max","valueChange"],[4,"ngIf"],[3,"colorSettings","baseTitle","value","renderItem","canvasSize","result","colorOptions","randFunction"]],template:function(e,n){1&e&&(t.TgZ(0,"fec-options-select",0),t.NdJ("valueChange",function(r){return n.setIndex(r)}),t._uU(1),t.qZA(),t.YNc(2,G,2,5,"ng-container",1)),2&e&&(t.Q6J("disabled",!n.data.assets)("value",n.index)("min",n.min)("max",n.max),t.xp6(1),t.hij(" ",n.title,"\n"),t.xp6(1),t.Q6J("ngIf",n.data.colorSettings))},directives:[F,m.O5,W],styles:[".fec-layer-renderer[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%}"]}),o})();const ee=["canvas"];function te(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"fec-layer-renderer",10),t.NdJ("layer",function(s){const a=t.CHM(e).$implicit;return t.oxw(2).onLayerRender(s,a.name)})("indexChange",function(s){const a=t.CHM(e).$implicit;return t.oxw(2).onIndexChange(s,a.name)})("colorChange",function(s){const a=t.CHM(e).$implicit;return t.oxw(2).onColorChange(s,a.name)})("randFunction",function(s){const a=t.CHM(e).$implicit;return t.oxw(2).setOptionRandomFunction(s,a.name)})("colorRandFunction",function(s){const a=t.CHM(e).$implicit;return t.oxw(2).setColorRandomFunction(s,a.name)}),t.qZA()()}if(2&o){const e=i.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("data",e)("index",n.optionIndices[e.name])("dependsOnIndex",null!=e.dependsOn?n.optionIndices[e.dependsOn]:null)("layerSize",n.config.dimensions)("colorValue",n.colorCache[e.name])}}const ne=function(o,i){return{height:o,width:i}};function oe(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",2),t._UZ(2,"canvas",3,4),t.qZA(),t.TgZ(4,"div",5)(5,"fec-options-select",6),t.NdJ("valueChange",function(s){return t.CHM(e),t.oxw().bodyTypeIndex=s}),t._uU(6),t.qZA(),t.TgZ(7,"ul",7),t.YNc(8,te,2,5,"li",8),t.qZA(),t.TgZ(9,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().getRandom()}),t._uU(10,"Randomize!"),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.WLB(8,ne,e.config.dimensions.y,e.config.dimensions.x)),t.xp6(1),t.Q6J("height",e.config.dimensions.y)("width",e.config.dimensions.x),t.xp6(3),t.Q6J("min",e.min)("max",e.max)("value",e.bodyTypeIndex),t.xp6(1),t.hij(" ",e.currentBodyType.title," "),t.xp6(2),t.Q6J("ngForOf",e.currentBodyType.config)}}function ie(o,i){if(1&o&&(t.TgZ(0,"div",11),t._uU(1),t.ALo(2,"percent"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" loading ",t.lcZ(2,1,e.complete)," ")}}let j=(()=>{class o{constructor(){this.baseClass=!0,this.loaded=!1,this.optionIndices={},this.renderCache={},this.colorCache={},this.optionRandFunc={},this.colorRandFunc={},this.min=0,this.max=0,this._bodyTypeIndex=2,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.delayedRender=!0,this.canvasFilledCount=0}set config(e){if(this._config=e,e){this.loaded=!0;const{x:n,y:s}=e.dimensions;this.currentBodyType=e.options[this.bodyTypeIndex],this.optionIndices={},this.renderCache={},this.colorCache={},this.currentBodyType.config.forEach(r=>{this.optionIndices[r.name]=r.canBeBlank?-1:0,this.renderCache[r.name]=null}),this.canvasFilledCount=0,this.canvas.height=s,this.canvas.width=n,this.max=e.options.length-1}}get config(){return this._config}set renderCanvas(e){e&&(this.renderCtx=e.nativeElement.getContext("2d"),this.delayedRender&&this.drawToCanvas(this.canvas))}set bodyTypeIndex(e){this._bodyTypeIndex=e,this.currentBodyType=this.config.options[e]}get bodyTypeIndex(){return this._bodyTypeIndex}ngOnInit(){}onLayerRender(e,n){this.renderCache[n]||this.canvasFilledCount++,this.renderCache[n]=e,this.render()}onIndexChange(e,n){this.optionIndices[n]=e}onColorChange(e,n){this.renderCache[n]||this.canvasFilledCount++,this.colorCache[n]=e}render(){if(this.canvasFilledCount<this.config.layerOrder.length)return;this.ctx.clearRect(0,0,this.config.dimensions.x,this.config.dimensions.y);const e=this.config.layerOrder;for(let n=e.length-1;n>=0;n--){const r=this.renderCache[e[n]];r&&this.ctx.drawImage(r,0,0)}this.renderCtx?this.drawToCanvas(this.canvas):this.delayedRender=!0}drawToCanvas(e){this.renderCtx.clearRect(0,0,this.config.dimensions.x,this.config.dimensions.y),this.renderCtx.drawImage(e,0,0)}getRandom(){const e=w(this.min,this.max);this.config.menuOrder.forEach(n=>{const r=this.optionRandFunc[n](),a=this.colorRandFunc[n],l=a?a():void 0;(this.optionIndices[n]!==r||this.colorCache[n]!==l)&&(this.canvasFilledCount--,this.renderCache[n]=null),this.optionIndices[n]=r,this.colorCache[n]=l}),e!==this.bodyTypeIndex&&(this.canvasFilledCount=0,this.bodyTypeIndex=e,this.renderCache={}),this.optionIndices=Object.assign({},this.optionIndices),this.colorCache=Object.assign({},this.colorCache)}setOptionRandomFunction(e,n){this.optionRandFunc[n]=e}setColorRandomFunction(e,n){this.colorRandFunc[n]=e}trackByIndex(e,n){return e}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["fec-renderer"]],viewQuery:function(e,n){if(1&e&&t.Gf(ee,5),2&e){let s;t.iGM(s=t.CRH())&&(n.renderCanvas=s.first)}},hostVars:4,hostBindings:function(e,n){2&e&&t.ekj("fec-renderer",n.baseClass)("fec-renderer--loaded",n.loaded)},inputs:{complete:"complete",config:"config"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"fec-renderer__canvas-container",3,"ngStyle"],[1,"fec-renderer__canvas",3,"height","width"],["canvas",""],[1,"fec-renderer__controls"],[3,"min","max","value","valueChange"],[1,"fec-renderer__options"],[4,"ngFor","ngForOf"],[1,"fec-renderer__randomize",3,"click"],[3,"data","index","dependsOnIndex","layerSize","colorValue","layer","indexChange","colorChange","randFunction","colorRandFunction"],[1,"fec-renderer__loading"]],template:function(e,n){if(1&e&&(t.YNc(0,oe,11,11,"ng-container",0),t.YNc(1,ie,3,3,"ng-template",null,1,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",n.config)("ngIfElse",s)}},directives:[m.O5,m.PC,F,m.sg,X],pipes:[m.Zx],styles:[".fec-renderer[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center}.fec-renderer__controls[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;width:255px}.fec-renderer__options[_ngcontent-%COMP%]{padding:0;list-style:none;width:100%}.fec-renderer__options[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%}"]}),o})();function se(o,i){1&o&&(t.TgZ(0,"p",4),t._uU(1," To save, right click -> Save Image As (Chrome and Firefox only). Corrin is mirrored on desktop view to match the Fates character creator interface.\n"),t.qZA())}function re(o,i){if(1&o&&t._UZ(0,"fec-renderer",5),2&o){const e=t.oxw();t.Q6J("config",e.config.data)("complete",e.config.complete)}}let ae=(()=>{class o{constructor(e){this.configService=e,this.baseClass=!0}ngOnInit(){this.config$=this.configService.getCorrinConfig(),this.configSubscription=this.config$.subscribe(e=>{this.config=e,1===e.complete&&this.configService.cacheCorn(e)})}ngOnDestroy(){this.configSubscription&&this.configSubscription.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(V))},o.\u0275cmp=t.Xpm({type:o,selectors:[["fecustomizer-engine-kamui"]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("kamui-customizer",n.baseClass)},decls:6,vars:2,consts:[[1,"kamui-customizer__header"],["src","./assets/ui/corn/logo.svg",1,"kamui-customizer__fates-logo"],["class","kamui-customizer__help-text",4,"ngIf"],["class","kamui-customizer__renderer",3,"config","complete",4,"ngIf"],[1,"kamui-customizer__help-text"],[1,"kamui-customizer__renderer",3,"config","complete"]],template:function(e,n){1&e&&(t.TgZ(0,"header",0),t._UZ(1,"img",1),t.TgZ(2,"h1"),t._uU(3,"KamuiCustomizer V2.0"),t.qZA()(),t.YNc(4,se,2,0,"p",2),t.YNc(5,re,1,2,"fec-renderer",3)),2&e&&(t.xp6(4),t.Q6J("ngIf",n.config.data),t.xp6(1),t.Q6J("ngIf",n.config))},directives:[m.O5,j],styles:['@keyframes kc-color-button-anim{0%{box-shadow:inset 0 0 5px 2px #ffffffb3}50%{box-shadow:inset 0 0 #fff0}to{box-shadow:inset 0 0 5px 2px #ffffffb3}}.kamui-customizer{display:flex;flex-direction:column;min-height:100%;width:100%;align-items:center;font-family:fot-chiaro-std,sans-serif;font-size:14px;color:#450900;line-height:16px}.kamui-customizer .kamui-customizer__header{margin:12px;position:relative;min-width:300px}.kamui-customizer .kamui-customizer__header h1{font-weight:700;font-size:4rem;line-height:4.8rem;text-align:center;margin-top:24px;margin-bottom:8px;color:#450900}.kamui-customizer .kamui-customizer__fates-logo{position:absolute;width:200px;z-index:-1;left:50%;transform:translate(-50%);fill:#844b27}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded{margin:12px;position:relative;max-width:100%;min-width:300px;padding:0;flex-direction:row;gap:6px;background:#71e4f7;background:linear-gradient(180deg,#71e4f7 0%,#3eb4ee 10%,#176071 20%,#0a3847 49%,#012022 78%,#0d3147 85%,#597485 91%,#929fa7 100%);border:3px solid #450900;border-radius:2px}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded:after{content:"";position:absolute;padding:12px;height:100%;width:100%;top:-12px;left:-12px;z-index:-1;background:#844b27;background:linear-gradient(180deg,#844b27 0%,#f4d481 34%,#f4d481 46%,#844b27 100%);border:1px solid #450900}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-renderer__canvas-container{display:flex;transform:rotateY(180deg);align-self:flex-end}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-renderer__canvas-container canvas{margin:0;padding:0}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-renderer__controls{border-radius:3px;padding:12px;background-color:#d7a75d;border:1px solid #9f4a23;box-shadow:inset 0 0 20px 10px #9f4a23,0 3px 2px #00000080;margin:12px}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-renderer__options{display:flex;flex-direction:column;padding:0;margin:6px 0;gap:6px}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-options-select{height:20px;gap:3px}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded fec-color-select{margin-top:6px}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-options-select__title{box-shadow:inset 0 0 10px #cea758,0 0 20px #f4d481;background:#fce9a7;border-radius:5px;padding:0;border:1px solid #cea758}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-options-select__title .color-options-palette__select{border:0;background:0;animation:3s infinite linear kc-color-button-anim;font-family:fot-chiaro-std,sans-serif;font-size:1.4rem;line-height:1.6rem;color:#450900;cursor:pointer;border-radius:3px}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-options-select__title .color-options-palette__select:hover{background:rgba(255,255,255,.5)}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-options-select__button{position:relative;border:1px solid #774314;box-shadow:inset 0 0 5px #774314;background-color:#450900;color:#ffdabd;border-radius:5px;z-index:2;cursor:pointer}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-options-select__button:hover{background:#f5422e;border:1px solid #a3350e}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-options-select--disabled{opacity:.5}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-options-select--disabled .fec-options-select__button:hover{background:#450900;border:1px solid #774314}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-options-select--disabled .fec-options-select__button{cursor:default}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-options-select__previous:before{border-right-color:#ffdabd}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-options-select__next:before{border-left-color:#ffdabd}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .color-options-palette__options{background-color:#fce9a7;border-radius:5px;box-shadow:inset 0 0 5px #cea758,0 3px 2px #0003}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-renderer__randomize{position:relative;font-family:fot-chiaro-std,sans-serif;font-size:1.4rem;line-height:1.6rem;color:#fce9a7;background:#07431f;box-shadow:inset 0 0 1px #ffffffb3,0 3px 2px #0003;border:1px solid rgba(0,0,0,.3);z-index:2;border-radius:3px;padding:3px;cursor:pointer}.kamui-customizer .kamui-customizer__renderer.fec-renderer--loaded .fec-renderer__randomize:hover{background:#f5422e}.kamui-customizer .kamui-customizer__help-text{max-width:600px;width:100%;padding:12px;margin:0 auto;text-align:center}.kamui-customizer .fec-renderer__loading{padding:24px;color:#844b27;font-size:3.2rem;line-height:3.2rem;text-align:center;text-transform:capitalize}@media screen and (max-width: 600px){.kamui-customizer .kamui-customizer__renderer.fec-renderer{flex-direction:column;gap:0px}.kamui-customizer .kamui-customizer__renderer.fec-renderer .fec-renderer__controls{margin:0 0 8px}.kamui-customizer .kamui-customizer__renderer.fec-renderer .fec-renderer__canvas-container{transform:none}}@media screen and (max-width: 360px){.kamui-customizer .kamui-customizer__header h1{font-size:36px;line-height:40px}}\n'],encapsulation:2}),o})();var ce=g(579);const E={now:()=>(E.delegate||Date).now(),delegate:void 0};class le extends ce.x{constructor(i=1/0,e=1/0,n=E){super(),this._bufferSize=i,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,i),this._windowTime=Math.max(1,e)}next(i){const{isStopped:e,_buffer:n,_infiniteTimeWindow:s,_timestampProvider:r,_windowTime:a}=this;e||(n.push(i),!s&&n.push(r.now()+a)),this._trimBuffer(),super.next(i)}_subscribe(i){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(i),{_infiniteTimeWindow:n,_buffer:s}=this,r=s.slice();for(let a=0;a<r.length&&!i.closed;a+=n?1:2)i.next(r[a]);return this._checkFinalizedStatuses(i),e}_trimBuffer(){const{_bufferSize:i,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:s}=this,r=(s?1:2)*i;if(i<1/0&&r<n.length&&n.splice(0,n.length-r),!s){const a=e.now();let l=0;for(let d=1;d<n.length&&n[d]<=a;d+=2)l=d;l&&n.splice(0,l+1)}}}var de=g(451),ue=g(900);const v={schedule(o,i){const e=setTimeout(o,i);return()=>clearTimeout(e)},scheduleBeforeRender(o){if("undefined"==typeof window)return v.schedule(o,0);if(void 0===window.requestAnimationFrame)return v.schedule(o,16);const i=window.requestAnimationFrame(o);return()=>window.cancelAnimationFrame(i)}};let k;function be(o,i,e){let n=e;return function pe(o){return!!o&&o.nodeType===Node.ELEMENT_NODE}(o)&&i.some((s,r)=>!("*"===s||!function fe(o,i){if(!k){const e=Element.prototype;k=e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}return o.nodeType===Node.ELEMENT_NODE&&k.call(o,i)}(o,s)||(n=r,0))),n}class ve{constructor(i,e){this.componentFactory=e.get(t._Vd).resolveComponentFactory(i)}create(i){return new Oe(this.componentFactory,i)}}class Oe{constructor(i,e){this.componentFactory=i,this.injector=e,this.eventEmitters=new le(1),this.events=this.eventEmitters.pipe((0,ue.w)(n=>(0,de.T)(...n))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:n})=>n)),this.ngZone=this.injector.get(t.R0b),this.elementZone="undefined"==typeof Zone?null:this.ngZone.run(()=>Zone.current)}connect(i){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(i)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=v.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(i){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(i):this.componentRef.instance[i])}setInputValue(i,e){this.runInZone(()=>{null!==this.componentRef?function ge(o,i){return o===i||o!=o&&i!=i}(e,this.getInputValue(i))&&(void 0!==e||!this.unchangedInputs.has(i))||(this.recordInputChange(i,e),this.unchangedInputs.delete(i),this.hasInputChanges=!0,this.componentRef.instance[i]=e,this.scheduleDetectChanges()):this.initialInputValues.set(i,e)})}initializeComponent(i){const e=t.zs3.create({providers:[],parent:this.injector}),n=function Ce(o,i){const e=o.childNodes,n=i.map(()=>[]);let s=-1;i.some((r,a)=>"*"===r&&(s=a,!0));for(let r=0,a=e.length;r<a;++r){const l=e[r],d=be(l,i,s);-1!==d&&n[d].push(l)}return n}(i,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(e,n,i),this.viewChangeDetectorRef=this.componentRef.injector.get(t.sBO),this.implementsOnChanges=function me(o){return"function"==typeof o}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(t.z2F).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:i})=>{this.initialInputValues.has(i)&&this.setInputValue(i,this.initialInputValues.get(i))}),this.initialInputValues.clear()}initializeOutputs(i){const e=this.componentFactory.outputs.map(({propName:n,templateName:s})=>i.instance[n].pipe((0,T.U)(a=>({name:s,value:a}))));this.eventEmitters.next(e)}callNgOnChanges(i){if(!this.implementsOnChanges||null===this.inputChanges)return;const e=this.inputChanges;this.inputChanges=null,i.instance.ngOnChanges(e)}markViewForCheck(i){this.hasInputChanges&&(this.hasInputChanges=!1,i.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=v.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(i,e){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const n=this.inputChanges[i];if(n)return void(n.currentValue=e);const s=this.unchangedInputs.has(i),r=s?void 0:this.getInputValue(i);this.inputChanges[i]=new t.WD2(r,e,s)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(i){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(i):i()}}class we extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}let ke=(()=>{class o{constructor(e){this.injector=e}ngDoBoostrap(){const e=function Fe(o,i){const e=function xe(o,i){return i.get(t._Vd).resolveComponentFactory(o).inputs}(o,i.injector),n=i.strategyFactory||new ve(o,i.injector),s=function _e(o){const i={};return o.forEach(({propName:e,templateName:n})=>{i[function he(o){return o.replace(/[A-Z]/g,i=>`-${i.toLowerCase()}`)}(n)]=e}),i}(e);class r extends we{constructor(l){super(),this.injector=l}get ngElementStrategy(){if(!this._ngElementStrategy){const l=this._ngElementStrategy=n.create(this.injector||i.injector);e.forEach(({propName:d})=>{if(!this.hasOwnProperty(d))return;const u=this[d];delete this[d],l.setInputValue(d,u)})}return this._ngElementStrategy}attributeChangedCallback(l,d,u,p){this.ngElementStrategy.setInputValue(s[l],u)}connectedCallback(){let l=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),l=!0),this.ngElementStrategy.connect(this),l||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(l=>{const d=new CustomEvent(l.name,{detail:l.value});this.dispatchEvent(d)})}}return r.observedAttributes=Object.keys(s),e.forEach(({propName:a})=>{Object.defineProperty(r.prototype,a,{get(){return this.ngElementStrategy.getInputValue(a)},set(l){this.ngElementStrategy.setInputValue(a,l)},configurable:!0,enumerable:!0})}),r}(j,{injector:this.injector});customElements.define("fec-renderer",e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(t.zs3))},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[R],imports:[[m.ez]]}),o})(),Se=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[m.ez,ke,B.Bz.forChild([{path:"",pathMatch:"full",component:ae}])]]}),o})()}}]);